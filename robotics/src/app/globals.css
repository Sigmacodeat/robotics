/* Accessibility utilities */
/* Skip-Link: nur bei Tastaturfokus sichtbar, sonst offscreen */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: fixed;
  left: 12px;
  top: 12px;
  width: auto;
  height: auto;
  padding: 8px 12px;
  background: var(--color-surface);
  color: var(--color-foreground);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  z-index: 9999;
  box-shadow: 0 4px 14px -6px color-mix(in oklab, var(--color-deep-blue) 25%, transparent);
}

.btn-outline-gradient {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  font-weight: 600;
  border-radius: 9999px;
  border: 1px solid transparent; /* dezente Hairline */
  /* zweilagiger Hintergrund: innen Surface, außen sehr subtile Brand‑Kontur */
  background:
    linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
    linear-gradient(225deg,
      color-mix(in oklab, var(--accent-3) 58%, var(--color-border) 42%) 0%,
      color-mix(in oklab, var(--accent) 56%, var(--color-border) 44%) 100%
    ) border-box;
  background-clip: padding-box, border-box;
  -webkit-background-clip: padding-box, border-box;
  color: color-mix(in oklab, var(--color-foreground) 92%, var(--accent-3) 8%);
  transition: background-color 180ms ease, box-shadow 180ms ease, color 180ms ease, transform 140ms ease;
}
.btn-outline-gradient:hover {
  /* minimaler Hover ohne starken Farbzuwachs */
  box-shadow: 0 6px 18px -14px color-mix(in oklab, var(--accent-3) 28%, transparent);
}
.dark .btn-outline-gradient {
  background:
    linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
    linear-gradient(225deg,
      color-mix(in oklab, var(--accent-3) 52%, var(--color-border) 48%) 0%,
      color-mix(in oklab, var(--accent) 50%, var(--color-border) 50%) 100%
    ) border-box;
  color: color-mix(in oklab, var(--color-foreground) 90%, var(--accent-3) 10%);
}
.dark .btn-outline-gradient:hover {
  box-shadow: 0 8px 20px -16px color-mix(in oklab, var(--accent-3) 30%, transparent);
}

/* Shine effect for gradient text (no glow, moving inner highlight) */
@keyframes shineMove {
  0% { background-position: 0% 0%, -60% 0; }
  100% { background-position: 0% 0%, 160% 0; }
}
.shine-text {
  /* Layer 1: keep existing element gradient; Layer 2: moving white highlight */
  background-image:
    var(--shine-base, var(--cover-gradient)),
    linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.65) 50%, transparent 100%);
  /* Preserve existing gradient if present via --shine-base; otherwise user can set gradient classes on element */
  background-size: 100% 100%, 200% 100%;
  background-repeat: no-repeat, no-repeat;
  /* Clip both layers to text */
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: shineMove 2.8s ease-in-out infinite;
}
@media (prefers-reduced-motion: reduce) {
  .shine-text { animation: none; }
}

/* AI brand gradients for shine-text base layer (teal → cyan → blue → violet blend) */
/* Use with .shine-text to get animated inner highlight on a tasteful gradient */
.ai-gradient {
  /* Slightly more saturated for main titles */
  --shine-base: linear-gradient(
    90deg,
    color-mix(in oklab, var(--accent) 90%, var(--foreground) 10%) 0%,
    color-mix(in oklab, var(--accent-2) 86%, var(--foreground) 14%) 30%,
    color-mix(in oklab, var(--accent-3) 88%, var(--foreground) 12%) 65%,
    color-mix(in oklab, #7c3aed 82%, var(--foreground) 18%) 100%
  );
}
.ai-gradient-subtle {
  /* Subtle variant for section headings */
  --shine-base: linear-gradient(
    90deg,
    color-mix(in oklab, var(--accent) 62%, var(--foreground) 38%) 0%,
    color-mix(in oklab, var(--accent-2) 58%, var(--foreground) 42%) 35%,
    color-mix(in oklab, var(--accent-3) 60%, var(--foreground) 40%) 70%,
    color-mix(in oklab, #6221d1 54%, var(--foreground) 46%) 100%
  );
}

/* Pure brand blue gradient for titles that should match the chapter counter tone */
.ai-blue {
  --shine-base: linear-gradient(
    90deg,
    color-mix(in oklab, var(--accent-3) 90%, var(--foreground) 10%) 0%,
    color-mix(in oklab, var(--accent-3) 86%, white 8%) 50%,
    color-mix(in oklab, var(--accent-3) 92%, var(--foreground) 8%) 100%
  );
}

/* Screenreader-only Text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #0e1b1f;
  --foreground-strong: #081215;
  --foreground-muted: #4c5b5f;
  /* SIGAMCODE Brand Accents */
  --accent: #0bb5a7;         /* teal */
  --accent-2: #5ad1c9;       /* light teal */
  --accent-3: #0e89ff;       /* blue */
  --deep-blue: #061d49;      /* even darker deep blue for TOC highlight */
  --muted: #f3f6f7;          /* subtle grey shimmer */
  /* Surfaces & borders */
  --surface: #ffffff;
  --surface-2: #f9fbfc;
  --border: color-mix(in oklab, #0b1a1c 8%, #ebf4f5 8%);
  --border-subtle: color-mix(in oklab, #0b1a1c 6%, #ebf4f5 6%);
  --border-strong: color-mix(in oklab, #0b1a1c 12%, #ebf4f5 12%);
  --ring: var(--accent-3);
  /* Semantic primary alias used across components */
  --color-primary: var(--accent-3);
  --color-primary-foreground: #ffffff;
  /* Semantic */
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  /* KPI chart tokens */
  --kpi-blue: #3b82f6;
  --kpi-blue-bg: rgba(59,130,246,0.15);
  --kpi-green: #22c55e;
  --kpi-green-bg: rgba(34,197,94,0.15);
  --kpi-amber: #f59e0b;
  --kpi-amber-bg: rgba(245,158,11,0.15);
  /* Gradient tokens */
  --gradient-primary: linear-gradient(225deg, var(--accent) 0%, var(--accent-3) 100%);
  --gradient-underline: linear-gradient(90deg, color-mix(in oklab, var(--accent) 75%, var(--foreground) 25%), var(--accent-3));
  /* Cover title gradient (light) reused across pages */
  --cover-gradient: linear-gradient(90deg, rgba(5,150,105,0.65), rgba(8,145,178,0.65), rgba(2,132,199,0.65));
}

/* Hint the UA about supported color schemes for better form controls, etc. */
:root { color-scheme: light dark; }

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-foreground-strong: var(--foreground-strong);
  --color-foreground-muted: var(--foreground-muted);
  --color-accent: var(--accent);
  --color-accent-2: var(--accent-2);
  --color-accent-3: var(--accent-3);
  --color-deep-blue: var(--deep-blue);
  --color-muted: var(--muted);
  --color-surface: var(--surface);
  --color-surface-2: var(--surface-2);
  --color-card: var(--surface);
  --color-border: var(--border);
  --color-border-subtle: var(--border-subtle);
  --color-border-strong: var(--border-strong);
  --color-ring: var(--ring);
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-danger: var(--danger);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* Explicit dark theme via next-themes .dark class */
.dark {
  /* Apple-like dark gray palette */
  --background: #121212;           /* near-black but not pure black */
  --foreground: #d8e3e6;           /* softer for reading */
  --foreground-strong: #eef6f7;    /* headings */
  --foreground-muted: #a6b6ba;     /* meta text */
  --muted: #161819;                /* BM-KPI-Card: zentraler Glas-/Grau-Look (Light/Dark) – natives CSS ohne @apply */
  --accent: #07a698;
  --accent-2: #4bc3bb;
  --accent-3: #1290ff;
  --surface: #1c1c1e;              /* iOS/macOS-like card gray */
  --surface-2: #2c2c2e;            /* slightly darker for panels */
  --border: color-mix(in oklab, #e6f1f2 9%, transparent);
  --border-subtle: color-mix(in oklab, #e6f1f2 3.5%, transparent);
  --border-strong: color-mix(in oklab, #e6f1f2 12%, transparent);
  --ring: var(--accent-3);
  --color-primary: var(--accent-3);
  --color-primary-foreground: #ffffff;
  --success: #34d399;
  --warning: #fbbf24;
  --danger: #f87171;
  /* Dark gradients tuned for gray surfaces (avoid pitch black) */
  --gradient-primary: linear-gradient(225deg, color-mix(in oklab, var(--accent) 85%, #0e0e10) 0%, color-mix(in oklab, var(--accent-3) 85%, #0e0e10) 100%);
  --gradient-underline: linear-gradient(90deg, color-mix(in oklab, var(--accent) 70%, white 10%), color-mix(in oklab, var(--accent-3) 80%, white 6%));
  /* Cover title gradient (dark) */
  --cover-gradient: linear-gradient(90deg, rgba(52,211,153,0.87), rgba(34,211,238,0.87), rgba(14,165,233,0.87));
}

body {
  /* Keep body plain; decorative background will live inside the page container */
  background: var(--surface);
  color: var(--foreground);
  font-family: var(--font-geist-sans), ui-sans-serif, system-ui;
  line-height: 1.65;
  margin: 0; /* remove default browser margin to avoid white borders */
}

/* Businessplan container background (light theme) */
.bp-background {
  /* Neutral, no green/teal tint */
  background: var(--muted);
}

html {
  scroll-behavior: smooth;
  /* Reserviere permanent Platz für die Scrollbar, um Layout-Shifts beim Body-Scroll-Lock zu vermeiden */
  scrollbar-gutter: stable both-edges;
}

/* Avoid header overlap when navigating to anchors – larger, responsive offset */
:root { --anchor-offset: 7.5rem; }
@media (min-width: 1024px) { :root { --anchor-offset: 9rem; } }
h2[id], h3[id], h4[id], .prose h2[id], .prose h3[id], .prose h4[id] {
  scroll-margin-top: var(--anchor-offset);
}

@media (min-width: 1024px) {
  body { font-size: 17px; }
}

.dark body { background: var(--surface); }

/* Businessplan container background (dark theme) */
.dark .bp-background {
  /* subtle dark-gray gradient for Apple-like feel */
  background: linear-gradient(180deg, var(--background), var(--surface-2) 26%, var(--background) 100%);
}

/* Utilities */
.container-gutter {
  @apply mx-auto px-6 sm:px-8 lg:px-12 max-w-7xl;
}

/* KPI card spacing utilities (consistent paddings and centering) */
@layer utilities {
  /* Reusable body text size used across chapters (13px → md:14px) */
  .text-body-sm {
    font-size: 13px;
  }
  @media (min-width: 768px) {
    .text-body-sm {
      font-size: 14px;
    }
  }
  .kpi-card {
    @apply bg-transparent shadow-none overflow-hidden rounded-xl min-w-0;
    /* unify inner rhythm */
    letter-spacing: 0; /* neutral tracking in cards */
  }
  .kpi-card-header {
    @apply px-2 py-2 min-w-0;
    /* tighter top, more room below overall */
    padding-top: 0.4rem;
    padding-bottom: 0.25rem;
  }
  .kpi-card-content {
    @apply px-2 py-2 min-w-0 flex flex-col items-center justify-center text-center gap-2;
    /* a bit more air at the bottom per user preference */
    padding-bottom: 0.75rem;
  }
  .kpi-value-row {
    @apply flex items-center justify-center gap-1.5 font-semibold leading-tight text-[--color-foreground] tracking-tight min-w-0;
    /* consistent value size across cards */
    font-size: clamp(13px, 0.75rem + 0.28vw, 15px);
  }
  .kpi-sub {
    @apply text-[--color-foreground-muted] leading-snug;
    font-size: clamp(10px, 0.65rem + 0.15vw, 11px);
  }
  /* unify header title typography inside cards */
  .kpi-card .kpi-card-header h3 {
    font-size: clamp(11px, 0.7rem + 0.2vw, 13px);
    line-height: 1.15;
    font-weight: 500;
    color: var(--color-foreground-muted);
    letter-spacing: 0.01em;
    text-decoration: none !important;
  }
  /* Dark: Labels/Überschriften in KPI-Karten heller (hellgrau/weißlich) */
  .dark .kpi-card .kpi-card-header,
  .dark .kpi-card .kpi-card-header h3 {
    color: color-mix(in oklab, white 82%, var(--color-foreground) 18%);
  }
  /* Dark: sekundäre Texte unter Werten (sub) etwas heller */
  .dark .kpi-sub { 
    color: color-mix(in oklab, white 72%, var(--color-foreground-muted) 28%);
  }
  /* Dark: Primärwerte in KPI-Karten zwingend hell/weiß */
  .dark .kpi-card .kpi-value,
  .dark .kpi-card .kpi-value span {
    color: #ffffff !important;
  }
  /* Fallback für alternative Wert-Zeilenklasse */
  .dark .kpi-card .kpi-value-row,
  .dark .kpi-card .kpi-value-row span {
    color: #ffffff !important;
  }
  /* Dark: Stelle sicher, dass KPI-Werte auch außerhalb des .kpi-card Wrappers (z. B. Kapitel 2) hell/weiß sind */
  .dark .kpi-value,
  .dark .kpi-value span {
    color: #ffffff !important;
  }
  /* BM-KPI-Card: zentraler Glas-/Grau-Look (Light/Dark) – natives CSS ohne @apply */
  .kpi-card--bm {
    /* Neuaufbau: alles neutral */
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
    background: transparent !important;
    /* Schatten neutralisieren, Border darf von Modifiers gesetzt werden */
    box-shadow: none !important;
  }
  /* Spacious variant: mehr Luft nach unten und leicht größere Werte */
  .kpi-card--spacious .kpi-card-content {
    padding-bottom: 1.15rem; /* + ~6px Luft */
    gap: 0.55rem;
  }
  .kpi-card--spacious .kpi-value-row {
    font-size: clamp(14px, 0.85rem + 0.35vw, 18px);
  }

  /* Compact variant: insgesamt kompaktere Karte (weniger Luft) */
  .kpi-card--compact .kpi-card-content {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    gap: 0.4rem;
  }
  .kpi-card--compact .kpi-value-row {
    font-size: clamp(13px, 0.8rem + 0.25vw, 16px);
  }

  /* Hairline border: dezenter, feiner Rand für kleine KPI-Karten */
  .kpi-card--hairline {
    border: 1px solid var(--color-border);
    /* feine Hairline-Kontur für HiDPI: minimaler zusätzlicher Schein */
    box-shadow: 0 0 0 0.5px color-mix(in oklab, var(--color-border) 60%, transparent);
    border-radius: 0.75rem;
    background: color-mix(in oklab, var(--color-surface) 98%, transparent 2%);
  }
  .dark .kpi-card--hairline {
    border-color: color-mix(in oklab, var(--color-border) 85%, white 6%);
    box-shadow: 0 0 0 0.6px color-mix(in oklab, var(--color-border) 80%, transparent);
    background: color-mix(in oklab, var(--color-surface) 94%, var(--color-foreground-muted) 6%);
  }

  /* Generic panel utilities (hairline cards/sections) */
  .panel {
    background: var(--color-surface);
  }
  .panel--hairline {
    border: 1px solid var(--color-border);
    box-shadow: 0 0 0 0.5px color-mix(in oklab, var(--color-border) 60%, transparent);
    background: color-mix(in oklab, var(--color-surface) 98%, transparent 2%);
  }
  .dark .panel--hairline {
    border-color: color-mix(in oklab, var(--color-border) 85%, white 6%);
    box-shadow: 0 0 0 0.6px color-mix(in oklab, var(--color-border) 80%, transparent);
    background: color-mix(in oklab, var(--color-surface) 94%, var(--color-foreground-muted) 6%);
  }

  /* KPI-Visual zentriert (Bars/Sparklines/Donuts) */
  .kpi-visual {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin: 0.25rem 0; /* leichte Luft oben/unten */
  }

  /* Einzeilige Trunkierung für kompakte Kartenhöhen */
  .one-line {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

/* Modifier: remove left padding for flush-left sections (e.g., when a sidebar handles spacing) */
/* removed: .container-gutter--flush-left (unused) */

  /* Dynamic layout offset based on TOC state (desktop only) */
  @media (min-width: 1024px) {
  /* WICHTIG: Um Scrollsprünge nach Anchor-Navigation zu vermeiden, halten wir die Content-Breite konstant,
     unabhängig davon, ob die TOC eingeklappt oder ausgeklappt ist. Dadurch gibt es keinen Reflow bei
     Zeilenumbrüchen und somit kein Nach-unten-Springen beim Schließen der Sidebar. */
  .content-wrap {
    /* keine Transition auf padding-left, damit kein "weiches" Reflow entsteht */
    padding-left: 384px; /* fester Reservierungsraum: Sidebar (360) + Außenabstand */
  }
  :root[data-toc="expanded"] .content-wrap { padding-left: 384px; }
  :root[data-toc="collapsed"] .content-wrap { padding-left: 384px; }
  /* When content is explicitly marked as outside (TOC is fixed outside the container),
     cancel the left padding reservation to avoid excess spacing */
  .content-wrap--outside {
    padding-left: 0 !important;
  }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
  /* Disable smooth scrolling for users who prefer reduced motion */
  html { scroll-behavior: auto !important; }
}

.btn-primary {
  @apply inline-flex items-center gap-2 rounded-full bg-[--color-accent] text-white px-6 py-3 font-medium shadow-sm hover:brightness-110 active:brightness-95 transition;
}

/* Outline-Version im Brand-Blaugrün (sichtbarer Rand auch im Dark Mode) */
.btn-outline-brand {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  border-radius: 9999px;
  padding: 0.75rem 1.5rem;
  font-weight: 600;
  border: 1.5px solid color-mix(in oklab, var(--color-accent-3) 92%, white 8%);
  color: color-mix(in oklab, var(--color-accent-3) 92%, white 8%);
  background: transparent;
  transition: background-color 180ms ease, color 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
}
.btn-outline-brand:hover {
  background: color-mix(in oklab, var(--color-accent-3) 10%, transparent);
  box-shadow: 0 6px 16px -10px color-mix(in oklab, var(--color-accent-3) 35%, transparent);
}
.dark .btn-outline-brand {
  border-color: color-mix(in oklab, var(--color-accent-3) 88%, white 12%);
  color: color-mix(in oklab, var(--color-accent-3) 92%, white 12%);
}
.dark .btn-outline-brand:hover {
  background: color-mix(in oklab, var(--color-accent-3) 18%, transparent);
}

.badge {
  /* Sicher sichtbarer dünner Rahmen: echte Border + sehr dezenter Hintergrund */
  @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] leading-tight text-[--color-foreground] shadow-sm;
  /* Echte 1px-Border, mit etwas höherem Kontrast */
  border: 1px solid var(--color-border);
  /* Sehr leichter Fill, statt starkem Muted-Overlay */
  background: color-mix(in oklab, var(--color-surface) 96%, var(--color-muted) 4%);
  /* Haarlinien-Kontur für hohe DPI/verschiedene Hintergründe */
  box-shadow: 0 0 0 0.5px color-mix(in oklab, var(--color-border) 70%, transparent);
}
.dark .badge {
  /* Dark Mode: etwas kontrastreicherer Rand und neutraler Fill für klare Kante */
  border-color: color-mix(in oklab, var(--color-border) 85%, white 5%);
  background: color-mix(in oklab, var(--color-surface) 90%, var(--color-foreground-muted) 10%);
  box-shadow: 0 0 0 0.6px color-mix(in oklab, var(--color-border) 85%, transparent);
}

/* Subtile, animierte Warnleiste unter dem Header (Newsbreak-Style) */
.warning-bar {
  position: relative;
  inset: auto 0 0 0;
  border-top: 1px solid var(--color-border-subtle);
  border-bottom: 1px solid var(--color-border-subtle);
  /* Dezenter, edler: noch geringere Sättigung */
  background: color-mix(in oklab, var(--color-surface) 98.8%, var(--color-warning) 1.2%);
}
.dark .warning-bar {
  background: color-mix(in oklab, var(--color-surface) 97%, var(--color-warning) 3%);
  border-top-color: color-mix(in oklab, var(--color-border) 85%, white 6%);
  border-bottom-color: color-mix(in oklab, var(--color-border) 85%, white 6%);
}
/* Glas-/Blur‑Look nur, wenn unterstützt */
@supports (backdrop-filter: blur(2px)) or (-webkit-backdrop-filter: blur(2px)) {
  .warning-bar {
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
    background: color-mix(in oklab, var(--color-surface) 92%, transparent);
    /* feine Gradient‑Hairlines oben/unten für edlen Abschluss */
  }
}
.warning-bar::before,
.warning-bar::after {
  content: "";
  position: absolute;
  left: 0; right: 0;
  height: 1px;
  pointer-events: none;
}
.warning-bar::before { top: 0; background: linear-gradient(90deg, transparent, var(--color-border-subtle), transparent); }
.warning-bar::after { bottom: 0; background: linear-gradient(90deg, transparent, var(--color-border-subtle), transparent); }
.warning-bar__inner {
  display: flex;
  align-items: center;
  min-height: 32px; /* noch dezenter */
  padding-top: 4px;
  padding-bottom: 4px;
  overflow: hidden;
}
.warning-marquee {
  position: relative;
  width: 100%;
  /* Flexible Höhe: orientiert sich an der Innenhöhe statt fixer 32px */
  min-height: 28px;
  height: auto;
  /* Edler Rand-Fade links/rechts → kein harter Anschnitt */
  -webkit-mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
  mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
  /* Standard-Geschwindigkeit als CSS-Variable */
  --marquee-duration: 40s;
}
.warning-track {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: flex; /* Ein Track mit doppeltem Content */
  align-items: center;
  height: 100%;
  gap: 0; /* Abstand wird in .warning-content gesetzt */
  white-space: nowrap;
  will-change: transform;
  /* Kontinuierliche Bewegung: Track verschiebt sich um 50% seiner Breite */
  animation: marqueeLoop var(--marquee-duration) linear infinite;
}
/* Einzelner Content-Block, der dupliziert wird */
.warning-content {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding-right: 32px; /* visuelle Luft am Übergabepunkt */
}
/* removed: warning-dot styles and pulse animation (dot no longer used) */
.warning-text {
  font-size: 12px;
  letter-spacing: 0.04em; /* feiner gesperrt */
  font-weight: 500;       /* leicht betont, nicht fett */
  color: color-mix(in oklab, var(--color-foreground) 94%, var(--color-warning) 6%);
}
.dark .warning-text {
  color: color-mix(in oklab, white 94%, var(--color-warning) 6%);
}
.warning-sep {
  color: color-mix(in oklab, var(--color-foreground-muted) 82%, var(--color-warning) 18%);
  margin: 0 8px;
}

/* Marquee-Animation – dezent und respektiert Reduced Motion */
@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}
/* Neuer Loop für Ein-Track-Lösung mit doppeltem Content */
@keyframes marqueeLoop {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
@media (prefers-reduced-motion: reduce) {
  .warning-track { animation: none !important; }
}
/* Hover/Fokus: höfliche Pause beider Spuren */
.warning-bar:hover .warning-track, .warning-bar:focus-within .warning-track { animation-play-state: paused; }
/* Mobil: Standard noch etwas ruhiger */
@media (max-width: 480px) and (prefers-reduced-motion: no-preference) {
  .warning-marquee { --marquee-duration: 48s; }
}

/* Mobile Typografie-Feinschliff */
@media (max-width: 380px) {
  .warning-text { font-size: 11.5px; }
  .warning-sep { margin: 0 6px; }
}

/* Robustheit: verhindere ungewünschte Wraps durch systemweite Einstellungen */
.warning-bar, .warning-bar__inner, .warning-marquee { overflow: hidden; }

/* Verstecke Scrollbar für TOC */
.scrollbar-hide {
  scrollbar-width: none; /* Firefox */
}
.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Webkit (Safari, Chrome) */
}

/* Print styles for CV and documents */
@media print {
  /* Page size and margins for A4 */
  @page {
    size: A4;
    margin: 16mm 16mm 20mm 16mm; /* top right bottom left */
  }

  /* Canonical print sizing tokens to prevent cumulative drift over pages */
  :root {
    --page-w: 210mm;
    --page-h: 297mm;
    --page-m-top: 16mm;
    --page-m-right: 16mm;
    --page-m-bottom: 20mm;
    --page-m-left: 16mm;
    --section-pad-top: 10mm;
    --section-pad-bottom: 8mm;
    --content-h: calc(var(--page-h) - var(--page-m-top) - var(--page-m-bottom));
  }

  /* Hide UI controls */
  .no-print {
    display: none !important;
  }

  /* Use white background for better contrast */
  html, body {
    background: #ffffff !important;
    color: #111827 !important; /* slate-900 */
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Improve hairline/border legibility in print (slightly stronger than screen) */
  :root {
    --border: #d1d5db !important;          /* slate-300 */
    --border-subtle: #e5e7eb !important;   /* slate-200 */
    --border-strong: #9ca3af !important;   /* slate-400 for timeline line visibility */
  }

  /* Force light theme tokens even if .dark is present at runtime */
  .dark {
    /* reset to light palette for print */
    --background: #ffffff !important;
    --foreground: #0e1b1f !important;
    --foreground-strong: #081215 !important;
    --foreground-muted: #4b5563 !important; /* slate-600 */
    --surface: #ffffff !important;
    --surface-2: #f5f7f8 !important;
    --border: #e5e7eb !important; /* slate-200 */
    --border-subtle: #eaeef1 !important;
    --border-strong: #d1d5db !important; /* slate-300 */
    --ring: #1290ff !important;
    --color-primary: #1290ff !important;
    --color-primary-foreground: #ffffff !important;
    --gradient-primary: linear-gradient(225deg, #0bb5a7 0%, #0e89ff 100%) !important;
    --cover-gradient: linear-gradient(90deg, rgba(5,150,105,0.65), rgba(8,145,178,0.65), rgba(2,132,199,0.65)) !important;
  }

  /* Ensure cards/panels print on white with light borders */
  .panel,
  .panel--hairline,
  .kpi-card,
  .kpi-card--hairline {
    background: #ffffff !important;
    border-color: #e5e7eb !important;
    box-shadow: none !important;
  }

  /* Timeline/Articles: prevent awkward page breaks mid-card */
  [role="article"] {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* Hide non-essential UI strips */
  .warning-bar { display: none !important; }

  /* Generic UI controls are not useful in print */
  main[role="main"] button,
  main[role="main"] [role="button"] {
    display: none !important;
  }

  /* Neutralize sticky positioning to avoid clipped elements in print */
  .sticky,
  .md\:sticky,
  .lg\:sticky {
    position: static !important;
    top: auto !important;
  }

  /* Hide chrome not needed in PDFs */
  header[role="banner"],
  nav,
  .no-print,
  .screen-only,
  footer[role="contentinfo"] { display: none !important; }

  /* Provide print helpers */
  .print-only { display: block !important; }

  /* --- CV page specific pagination & cleanliness --- */
  /* Keep the summary block together on the first page */
  #cv-summary { break-inside: avoid !important; page-break-inside: avoid !important; }
  /* Start Timeline on a fresh page for clear structure */
  #cv-timeline { page-break-before: always !important; break-before: page !important; }
  /* Start Skills/Languages on a fresh page */
  #cv-skills { page-break-before: always !important; break-before: page !important; }
  /* Do not append raw URLs after links inside the CV sections */
  #cv-summary a[href^="http"]::after,
  #cv-timeline a[href^="http"]::after,
  #cv-skills a[href^="http"]::after { content: none !important; }

  /* --- Businessplan & PitchDeck: investor-ready print --- */
  /* Do not append raw URLs inside chapter sections */
  .chapter-section a[href^="http"]::after { content: none !important; }
  /* Remove CTAs/buttons within printable sections */
  .chapter-section button,
  .chapter-section [role="button"],
  .chapter-section .btn-primary,
  .chapter-section .btn-outline-gradient { display: none !important; }

  /* Watermark for all printed pages (visible but subtle) */
  .print-watermark {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }
  .print-watermark span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-24deg);
    font-size: 56pt;
    letter-spacing: 0.08em;
    color: color-mix(in oklab, #0b0f19 14%, transparent);
    opacity: 0.08;
    text-transform: uppercase;
    user-select: none;
    white-space: nowrap;
  }

  /* Print TOC aesthetics */
  .toc-print-item {
    display: flex;
    align-items: baseline;
    gap: 10px;
    padding: 6px 0;
    border-bottom: 1px dotted var(--border-subtle);
  }
  .toc-print-title {
    flex: 1 1 auto;
    color: var(--color-foreground);
    font-size: 12.5pt;
  }

  /* Typography for print: slightly tighter for more content/clarity */
  body { font-size: 10.6pt !important; line-height: 1.45 !important; }
  h1 { font-size: 19pt !important; }
  h2 { font-size: 15pt !important; }
  h3 { font-size: 12.5pt !important; }
  p, li { font-size: 10.6pt !important; hyphens: auto; }
  p { orphans: 3; widows: 3; }

  /* Remove decorative gradient/shine for maximum Lesbarkeit */
  .shine-text,
  .ai-gradient,
  .ai-gradient-subtle,
  .ai-blue {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #0b0f19 !important;
    -webkit-text-fill-color: #0b0f19 !important;
  }

  /* Tame rounded corners and heavy shadows for clean paper look */
  * { border-radius: 6px !important; }
  .rounded-2xl, .rounded-xl, .rounded-lg, .rounded-md, .rounded { border-radius: 8px !important; }
  .shadow, .shadow-sm, .shadow-md, .shadow-lg, .shadow-xl, .shadow-2xl { box-shadow: none !important; }

  /* Buttons/CTAs in Print ausblenden */
  .btn-primary,
  .btn-outline-brand,
  .btn-outline-gradient { display: none !important; }

  /* Sections should not split awkwardly */
  .chapter-section,
  section,
  article,
  .card,
  .panel,
  .prose ul,
  .prose ol { break-inside: avoid; page-break-inside: avoid; }

  /* Medien skalieren sauber und brechen nicht unschön um */
  img, svg, picture, video, canvas {
    max-width: 100% !important;
    height: auto !important;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Optional utility to force a new page where applied */
  .page-break-before { page-break-before: always !important; break-before: page !important; }
  .page-break-after  { page-break-after: always !important; break-after: page !important; }

  /* Pitch/Chapters: Jede Section beginnt auf neuer Seite, erste ausgenommen */
  .chapter-section {
    page-break-before: always !important;
    break-before: page !important;
    /* Fixe Mindesthöhe je Seite → verhindert vertikales „Driften“ über viele Seiten */
    min-height: calc(var(--content-h) - var(--section-pad-top) - var(--section-pad-bottom));
    /* Verhindere Margin-Collapse und inkrementelle Offsets */
    margin: 0 !important;
    padding-top: var(--section-pad-top) !important;
    padding-bottom: var(--section-pad-bottom) !important;
    /* Für zentriertes, ruhiges Erscheinungsbild */
    transform-origin: top center !important;
  }
  .chapter-section:first-of-type { page-break-before: auto !important; break-before: auto !important; }

  /* Neutralisiere Außenabstände am ersten/letzten Kind, damit nichts „hoch-/runterdrückt“ */
  .chapter-section > :first-child { margin-top: 0 !important; }
  .chapter-section > :last-child  { margin-bottom: 0 !important; }

  /* Headings nicht am Seitenende hängen lassen; Folgeblock zusammenhalten */
  h1, h2, h3 { break-after: avoid !important; page-break-after: avoid !important; }
  h2 + *, h3 + * { break-inside: avoid !important; page-break-inside: avoid !important; }

  /* Etwas kompaktere Innenabstände in Panels für bessere Flächennutzung im PDF */
  .panel, .panel--hairline, .chapter-section { padding-top: 9mm !important; padding-bottom: 7mm !important; }
  
  /* Remove shadows and subtle borders that waste ink */
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* Container gutters become page margins & zentrierter Hauptinhalt mit fixer Max-Breite */
  .container-gutter {
    padding-left: 18mm !important;
    padding-right: 18mm !important;
    max-width: calc(var(--page-w) - var(--page-m-left) - var(--page-m-right)) !important;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  /* Improve heading legibility */
  h1, h2, h3 {
    color: #0b0f19 !important;
    page-break-after: avoid;
  }

  /* Avoid breaking cards and list items in the middle */
  .card, .prose, section, article, .chapter-section {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Links: show URL only for external links (optional) */
  a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 0.85em;
    color: #6b7280; /* slate-500 */
  }

  /* Print footer with page numbers */
  body { counter-reset: page; }
  .print-footer {
    display: block !important;
    position: fixed;
    left: 0; right: 0; bottom: 8mm;
    z-index: 9999;
    color: #374151; /* slate-700 */
    font-size: 10pt;
  }
  .print-footer__inner {
    margin: 0 16mm;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 8px;
  }
  .print-footer__left { justify-self: start; }
  .print-footer__center { justify-self: center; }
  .print-footer__right { justify-self: end; }
  .page::after { content: counter(page); }
  .pages::after { content: counter(pages); }
}

/* Hide print footer on screen */
.print-footer { display: none; }

/* removed: legacy TOC pin styles (.toc-pin, .toc-pin--active) */

/* Force TOC title typography (override global h2 sizing) */
.toc-title {
  font-size: 10px !important;
  font-weight: 400 !important;
  letter-spacing: 0.16em !important;
  text-transform: uppercase !important;
  line-height: 1.2 !important;
  /* Light theme: match header dark blue */
  color: var(--color-deep-blue);
}

/* Refined, subtle scrollbars for TOC lists */
.toc-scroll {
  /* Reserviere permanent Platz für die Scrollbar → keine Layout-Sprünge */
  scrollbar-gutter: stable both-edges;
  /* Firefox: dünn, aber klarer Kontrast */
  scrollbar-width: thin;
  scrollbar-color: color-mix(in oklab, var(--color-deep-blue) 38%, transparent) color-mix(in oklab, var(--color-muted) 70%, transparent);
}
.toc-scroll::-webkit-scrollbar {
  width: 10px; /* minimal breiter für bessere Greifbarkeit */
}
.toc-scroll::-webkit-scrollbar-track {
  background: color-mix(in oklab, var(--color-muted) 70%, transparent);
  border-radius: 9999px;
}
.toc-scroll::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklab, var(--color-deep-blue) 42%, var(--color-border-subtle));
  border-radius: 9999px;
  border: 2px solid transparent; /* schafft sichtbaren Rand (Grip) */
  background-clip: content-box;
}
.toc-scroll:hover::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklab, var(--color-deep-blue) 58%, var(--color-border-strong));
}
.dark .toc-scroll::-webkit-scrollbar-track {
  background: color-mix(in oklab, var(--color-surface-2) 60%, transparent);
}
.dark .toc-scroll::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklab, var(--color-foreground-muted) 50%, var(--color-border-subtle));
}

/* Fokussierter Scrollbereich erhält klaren Ring für Tastatursteuerung */
.toc-scroll:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-ring);
}

/* TOC Scroll-Step Buttons */
/* removed: .toc-controls styles (unused) */

/* Elegant gradient separator for TOC sections */
/* removed: .toc-separator (unused) */

/* removed: legacy TOC link highlight styles (.toc-link, .toc-link--active) */

/* Dark-mode contrast improvements scoped to the sidebar panel */
.dark #toc-panel {
  color: var(--color-foreground);
}
.dark #toc-panel a {
  color: var(--color-foreground) !important;
}
.dark #toc-panel a:hover {
  /* lighter, more legible blue in dark mode */
  color: color-mix(in oklab, var(--color-accent-3) 78%, white) !important;
  text-decoration: underline;
  text-underline-offset: 2px;
}
.dark #toc-panel .toc-title {
  color: var(--color-foreground-muted) !important;
  opacity: 0.95;
}

/* Global focus ring for better accessibility */
*:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-ring);
}

/* Improve text selection for brand feel and contrast */
::selection {
  background: color-mix(in oklab, var(--color-accent) 24%, transparent);
}

/* Cards & chips */
.card {
  /* Neuaufbau: keine Hintergründe, Ränder oder Effekte */
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* Gradient text utility for KPI numbers and headings */
.text-gradient {
  background-image: linear-gradient(90deg, color-mix(in oklab, var(--accent) 85%, var(--foreground) 15%), var(--accent-3));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* Subtler gradient for section headings (less saturated than main title) */
.text-gradient-subtle {
  /* Light mode: etwas näher am Haupttitel (heller/satter) */
  background-image: linear-gradient(
    90deg,
    color-mix(in oklab, var(--accent) 70%, var(--foreground) 30%),
    color-mix(in oklab, var(--accent-3) 70%, var(--foreground) 30%)
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
/* Dark mode: dezent bleiben (neutraler Mix) */
.dark .text-gradient-subtle {
  background-image: linear-gradient(
    90deg,
    color-mix(in oklab, var(--accent) 50%, var(--foreground) 50%),
    color-mix(in oklab, var(--accent-3) 50%, var(--foreground) 50%)
  );
}

/* Subtle animated gradient helper (opt-in) */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@media (prefers-reduced-motion: no-preference) {
  .animate-gradient {
    background-image: var(--gradient-primary);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    animation: gradientShift 10s ease-in-out infinite; /* etwas lebendiger */
  }
}

/* Micro-animation for KPI chips */
@keyframes chipPop {
  0% { transform: translateY(4px) scale(0.98); opacity: 0; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}
.chip-anim {
  transition: transform 200ms ease, box-shadow 200ms ease, background-color 200ms ease;
}
@media (prefers-reduced-motion: no-preference) {
  .chip-anim {
    animation: chipPop 420ms cubic-bezier(0.22, 0.61, 0.36, 1) both;
  }
  /* Stagger: leichte, natürliche Staffelung */
  .chip-anim:nth-child(1) { animation-delay: 40ms; }
  .chip-anim:nth-child(2) { animation-delay: 80ms; }
  .chip-anim:nth-child(3) { animation-delay: 120ms; }
  .chip-anim:nth-child(4) { animation-delay: 160ms; }
  .chip-anim:nth-child(5) { animation-delay: 200ms; }
  .chip-anim:nth-child(6) { animation-delay: 240ms; }
}
.chip-anim:hover {
  transform: translateY(-1px) scale(1.01);
  box-shadow: 0 6px 16px -8px color-mix(in oklab, var(--color-deep-blue) 28%, transparent);
}
@media (prefers-reduced-motion: reduce) {
  .chip-anim { transition: none; }
}

/* Underline gradient utility for links and headings */
.underline-gradient {
  background-image: var(--gradient-underline);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 100% 1px;
  text-decoration: none !important;
}
.underline-gradient:hover {
  background-size: 100% 1.15px;
}

/* Heading underline variants (thicker, with spacing) */
.heading-underline {
  background-image: var(--gradient-underline);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 100% 1px;
  padding-bottom: 2px;
}
.heading-underline-sm {
  background-image: var(--gradient-underline);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 100% 1px;
  padding-bottom: 2px;
}

/* 1px gradient border for rounded chips – uses layered backgrounds to respect border-radius */
.border-gradient {
  border: 0.5px solid transparent; /* required to create the border box */
  border-radius: 9999px; /* ensure fully rounded corners for badges */
  background:
    /* inner fill */
    linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
    /* outer gradient border */
    var(--gradient-primary) border-box;
  /* ensure proper clipping of both layers to the rounded corners */
  background-clip: padding-box, border-box;
  -webkit-background-clip: padding-box, border-box;
}

/* Dark Mode: satterer Gradient-Rand und klare Sichtbarkeit auf dunklem Grund */
.dark .border-gradient {
  background:
    linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
    linear-gradient(
      225deg,
      color-mix(in oklab, var(--accent-3) 88%, white 8%) 0%,
      color-mix(in oklab, var(--accent) 88%, white 8%) 100%
    ) border-box;
  box-shadow: 0 0 0 0.5px color-mix(in oklab, var(--color-border) 65%, transparent);
  background-clip: padding-box, border-box;
  -webkit-background-clip: padding-box, border-box;
}

/* Subtle radial glow background (for hero blocks or emphasis containers) */
.glow-bg {
  position: relative;
}
.glow-bg::before {
  content: "";
  position: absolute;
  inset: -6rem -6rem auto -6rem;
  height: 40%;
  background: radial-gradient(60% 60% at 20% 20%, color-mix(in oklab, var(--color-accent-3) 18%, transparent), transparent 70%),
              radial-gradient(60% 60% at 80% 20%, color-mix(in oklab, var(--color-accent) 16%, transparent), transparent 70%);
  filter: blur(24px);
  pointer-events: none;
  z-index: 0;
}
@keyframes glowDrift {
  0% { transform: translateY(0); opacity: 0.9; }
  50% { transform: translateY(6px); opacity: 1; }
  100% { transform: translateY(0); opacity: 0.9; }
}
@media (prefers-reduced-motion: no-preference) {
  .glow-bg::before { animation: glowDrift 12s ease-in-out infinite; }
}

/* Subtle page-edge vignette to avoid perceived white borders on large displays */
.vignette-bg {
  position: relative;
}
.vignette-bg::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  /* Light theme: very subtle darkening at edges */
  background: radial-gradient(120% 120% at 50% -20%, transparent 65%, color-mix(in oklab, var(--color-deep-blue) 8%, transparent) 100%),
              radial-gradient(160% 100% at 50% 120%, transparent 70%, color-mix(in oklab, var(--color-deep-blue) 10%, transparent) 100%);
  z-index: 0;
}
.dark .vignette-bg::after {
  /* Dark theme: even subtler, use foreground-muted to avoid crushing blacks */
  background: radial-gradient(120% 120% at 50% -20%, transparent 62%, color-mix(in oklab, var(--color-foreground-muted) 8%, transparent) 100%),
              radial-gradient(160% 100% at 50% 120%, transparent 68%, color-mix(in oklab, var(--color-foreground-muted) 10%, transparent) 100%);
}

/* Dark theme override: keep TOC title subtle for contrast */
.dark .toc-title {
  color: var(--color-foreground-muted);
}

/* Investor-friendly typography */
h1,h2,h3 {
  line-height: 1.25;
}
/* Only set heading color when not using gradient text (text-transparent) */
h1:not(.text-transparent),
h2:not(.text-transparent),
h3:not(.text-transparent) {
  color: var(--color-foreground-strong);
}

h1 { font-size: clamp(2rem, 1.2rem + 2vw, 3rem); font-weight: 700; }
h2 { font-size: clamp(1.6rem, 1.2rem + 1.1vw, 2.35rem); font-weight: 700; }
h3 { font-size: clamp(1.3rem, 1.08rem + 0.6vw, 1.55rem); font-weight: 600; }

/* Slightly smaller variant for chapter titles */
.section-title {
  font-size: clamp(1.45rem, 1.1rem + 1vw, 2.1rem);
  font-weight: 700;
}

/* Airier vertical rhythm on screen (kompakter angepasst) */
h2 { margin-top: 2rem; margin-bottom: 0.8rem; }
h3 { margin-top: 1.5rem; margin-bottom: 0.5rem; }
p, li { color: var(--color-foreground); font-size: 1rem; }
/* tighter list item spacing within lists, but air after lists */
ul, ol { margin: 0.2rem 0 0.85rem 1.25rem; }
li + li { margin-top: 0.3rem; }
/* add breathing space between arbitrary blocks */
*:where(p, ul, ol, table, blockquote) + *:where(h2,h3) { margin-top: 2rem; }
*:where(h2,h3) + *:where(p, ul, ol, table, blockquote) { margin-top: 0.5rem; }
small, .muted { color: var(--color-foreground-muted); }

a { color: var(--color-deep-blue); text-decoration: none; }
a:hover { text-decoration: underline; color: var(--color-deep-blue); }
/* Modern, readable underlines */
a { text-underline-offset: 2px; text-decoration-thickness: from-font; }
code { color: var(--color-accent-3); }

/* Compact, muted source/reference line for blocks like "Quellen:" */
.source-note {
  display: block !important;     /* eigene Zeile unter dem Text; erzwinge Block in .prose */
  margin-top: 0.25rem;           /* noch etwas kompakter */
  font-size: clamp(9px, 0.62rem, 10px) !important; /* kleineres Quellenzitat */
  line-height: 1.3;              /* etwas dichter */
  color: var(--color-foreground-muted);
}
.source-note a {
  color: color-mix(in oklab, var(--color-deep-blue) 70%, var(--color-foreground-muted) 30%);
  text-decoration: underline;
  text-underline-offset: 2px;
}
.source-note a:hover {
  color: var(--color-deep-blue);
}
.dark .source-note a {
  color: color-mix(in oklab, white 86%, var(--color-foreground-muted) 14%);
}
.dark .source-note a:hover {
  color: white;
}

/* Ultra-dünner, weicher Trenner mit Links→Rechts-Verlauf für Listen (bullets) */
.list-separators-gradient {
  /* Standard-Trennerfarbe, kann per inline style überschrieben werden */
  --divider-color: var(--color-border); /* etwas kräftigeres Grau */
}
.list-separators-gradient > li {
  position: relative;
}
.list-separators-gradient > li:not(:last-child)::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 0.5px; /* dünner als 1px für edle Hairline */
  background: linear-gradient(90deg, transparent, var(--divider-color), transparent);
  opacity: 0.9;
}

/* Dark mode links: white in body and header */
.dark a { color: #ffffff; }
.dark a:hover { color: #ffffff; text-decoration: underline; }

/* Ensure gradient text renders over heading defaults (Safari/WebKit included) */
.bg-clip-text.text-transparent {
  color: transparent !important;
  -webkit-text-fill-color: transparent;
}

/* Sidebar links should match container text color for an understated, elegant look */
/* removed: .chapters-sidebar link styles (unused) */

/* Reading width and paragraph rhythm */
.reading-max { max-width: 72ch; }
p + p { margin-top: 0.9rem; }
ul, ol { padding-left: 1.25rem; }
/* list spacing moved above; keep padding here */

/* Rollout: apply gradient underline to all h3 subtitles inside content blocks
   Exclude headings explicitly marked as .not-prose (e.g., CardTitle in cards) */
.reading-max h3:not(.no-accent):not(.not-prose) {
  background-image: var(--gradient-underline);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 100% 1px;
  padding-bottom: 3px;
}

/* Subtle bottom line for table headers inside content blocks (replace gradient with neutral line) */
.reading-max table thead th {
  background-image: none;
  border-bottom: 1px solid color-mix(in oklab, var(--color-border-subtle) 100%, transparent);
  padding-bottom: 6px; /* space for visual separation */
}

/* Subtler list marker coloring for better harmony */
.reading-max ul li::marker {
  color: color-mix(in oklab, var(--color-foreground-muted) 85%, var(--color-accent-3) 15%);
}
.reading-max ol li::marker {
  color: color-mix(in oklab, var(--color-foreground-muted) 88%, var(--color-accent-3) 12%);
}
.dark .reading-max ul li::marker {
  color: color-mix(in oklab, var(--color-foreground-muted) 90%, var(--color-accent-3) 10%);
}
.dark .reading-max ol li::marker {
  color: color-mix(in oklab, var(--color-foreground-muted) 92%, var(--color-accent-3) 8%);
}

@media print {
  /* Fallback: Gradient-Text als normale Schriftfarbe drucken */
  .text-gradient {
    color: #111 !important;
    background: none !important;
    background-clip: initial !important;
  }
  html { scroll-behavior: auto !important; }
  /* Disable scroll snap during print */
  * {
    scroll-snap-type: none !important;
    scroll-snap-align: none !important;
    scroll-snap-stop: normal !important;
  }
  .print\:hidden { display: none !important; }
  .print\:show { display: initial !important; }
  a { color: #111; text-decoration: none; }
  header, nav, footer.sticky, .no-print { display: none !important; }

  /* Avoid widows/orphans and bad breaks */
  h2, h3 { break-after: avoid; page-break-after: avoid; }
  section, .card, table, ul, ol { break-inside: avoid; page-break-inside: avoid; }
  table { width: 100%; border-collapse: collapse; }
  thead { display: table-header-group; }
  tfoot { display: table-footer-group; }
  tr, td, th { break-inside: avoid; page-break-inside: avoid; }
  .avoid-break-inside { break-inside: avoid; page-break-inside: avoid; }
  /* Tighter spacing for print */
  h2 { margin-top: 1.2rem; margin-bottom: 0.6rem; }
  h3 { margin-top: 0.9rem; margin-bottom: 0.4rem; }
  p { margin: 0 0 0.5rem; }
  ul, ol { margin: 0.25rem 0 0.75rem 1.25rem; }
}

/* Page break helpers */
.page { page-break-after: always; }
.break-before { page-break-before: always; }
.avoid-break-inside { break-inside: avoid; page-break-inside: avoid; }

/* TOC fade-out effect */
/* removed: .toc-fade-out effect (unused) */

/* Remove test overrides; restored to design tokens */

/* Add to existing globals.css */
@media print {
  .page-break-after {
    page-break-after: always;
  }
  
  .business-plan-content {
    page-break-before: always;
  }
}
